select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval5)
interval6 <- all3 %>%
filter(Date >= as_datetime('2018-09-30 15:30:00') &
Date <= as_datetime('2018-10-03 07:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-30 15:30:00",
end = "2018-10-03 07:30:00",
tz = "EST"))%>%
mutate(Event = 6)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval6)
interval7 <- all3 %>%
filter(Date >= as_datetime('2018-10-10 18:30:00') &
Date <= as_datetime('2018-10-11 14:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-10-10 18:30:00",
end = "2018-10-11 14:30:00",
tz = "EST"))%>%
mutate(Event = 7)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval7)
interval8 <- all3 %>%
filter(Date >= as_datetime('2018-10-31 20:30:00') &
Date <= as_datetime('2018-11-02 12:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-10-31 20:30:00",
end = "2018-11-02 12:30:00",
tz = "EST"))%>%
mutate(Event = 8)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval8)
interval9 <- all3 %>%
filter(Date >= as_datetime('2018-11-02 13:30:00') &
Date <= as_datetime('2018-11-03 20:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-11-02 13:30:00",
end = "2018-11-03 20:30:00",
tz = "EST"))%>%
mutate(Event = 9)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval9)
only_interval <- interval_ppt %>%
select(interval, Event)%>%
distinct(interval, Event)
write_csv(x = only_interval,
paste0(here,"/output/hobo_ppt_interval_file.csv"))
View(interval1)
centroid1 <- (as.POSIXct(sum(interval1 * attr(interval1 , 'W9_Precipitation_mm'))
/sum(interval1 ),
origin = "	2018-07-26 12:30:00"))
centroid1 <- (as.POSIXct(sum(interval_ppt * attr(interval_ppt , 'W9_Precipitation_mm'))
/sum(interval_ppt ),
origin = "	2018-07-26 12:30:00"))
centroid1 <- (as.POSIXct(sum(interval_ppt$W9_Precipitation_mm * attr(interval_ppt$W9_Precipitation_mm , 'Date'))
/sum(interval_ppt$W9_Precipitation_mm ),
origin = "	2018-07-26 12:30:00"))
centroid1 <- (as.POSIXct(sum(interval_ppt$Event * attr(interval_ppt$Event , 'Date'))
/sum(interval_ppt$Event ),
origin = "	2018-07-26 12:30:00"))
tt <- as.numeric(time(interval1))
flow <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "GMT", tzone = "GMT",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
View(flow)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "2018-07-26 00:30:00")
as.POSIXct(sum(flow * attr(flow, 'index'))/sum(flow), origin = "2018-07-26 00:30:00")
tt <-as.POSIXct(sum(flow * attr(flow, 'index'))/sum(flow), origin = "2018-07-26 00:30:00")
flow <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "2018-07-26 00:30:00")
flow <- structure(interval2$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval2$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
View(interval2)
flow <- structure(interval2$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval2$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "2018-07-26 00:30:00")
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "2018-09-03 01:30:00")
ggplot(interval1) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield \n") +
theme_bw()
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield -
Event : 2 \n") +
theme_bw()
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
library(here)
here <- here()
here
library(tidyverse)
library(lubridate)
library(dygraphs)
library(xts)
library(highcharter)
precip <- readr::read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
ppt <- precip %>%
mutate(.after = datetime_EST, #indicates where the new column is placed
datetime_EST2 = as.POSIXct(datetime_EST, format = "%m/%d/%Y %H:%M"))
ppt2 <- ppt %>% select(datetime_EST2, W9_Precipitation_mm)
precip_xts <- xts(ppt2, order.by=ppt$datetime_EST2)
dygraph(precip_xts) %>% dyAxis("y", valueRange = c(-1, 1)) %>%
dyRangeSelector()
all <- ppt2 %>% rename("dt" = datetime_EST2) %>%
drop_na()
hobo_events <- readRDS(paste0(here, "/output/hobo_events.Rds"))
all2 <- all %>% full_join(., hobo_events ) %>%
group_by(dt) %>%
arrange(dt) %>%
ungroup()
all3 <- all2 %>%
mutate(Date = lubridate::ymd_hms(dt)) %>%
filter(Date >= as_datetime('2018-07-01') & Date <= as_datetime('2018-11-04'))
all4 <- all3 %>%
pivot_longer(cols = contains("_mm"), names_to = "site",
values_to = "yield_mm") %>%
group_by(site, dt) %>%
arrange(dt)%>%
ungroup()%>%
select(dt, site, yield_mm)%>%
drop_na()
sapply(all3, class)
ggplot(all4) +
geom_line(mapping=aes(x= dt, y= yield_mm, colour = site, group = site),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield \n") +
theme_bw() + facet_wrap(~site, scales = "free_y", ncol = 1)+#scales optional
theme(legend.position="none")
#interactive plot of throughfall
all_xts <- xts(all3 %>% select(dt, W9_Precipitation_mm, SFA_mm, SFB_mm,
SFC_mm, SFD_mm,TFB_mm,TFD_mm),
order.by=all3$dt)
dygraph(all_xts) %>% dyAxis("y", valueRange = c(-1, 100)) %>%
dyRangeSelector() %>% dyOptions(useDataTimezone = TRUE) %>%
dySeries("W9_Precipitation_mm", stepPlot = TRUE, fillGraph = TRUE,
color = "red")
interval_ppt <- slice(all3, 0)
interval1 <- all3 %>%
filter(Date >= as_datetime('2018-07-25 23:30:00') &
Date <= as_datetime('2018-07-26 12:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-07-25 23:30:00",
end = "2018-07-25 23:30:00",
tz = "EST"))%>%
mutate(Event = 1)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
ggplot(interval1) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield \n") +
theme_bw()
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
interval3 <- all3 %>%
filter(Date >= as_datetime('	2018-09-10 12:30:00') &
Date <= as_datetime('2018-09-11 02:30:00')) %>%
mutate(interval = lubridate::interval(start = "	2018-09-10 12:30:00",
end = "2018-09-11 02:30:00",
tz = "EST"))%>%
mutate(Event = 3)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval3)
ggplot(interval3) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 3\n") +
theme_bw()
interval4 <- all3 %>%
filter(Date >= as_datetime('2018-09-20 20:30:00') &
Date <= as_datetime('2018-09-22 03:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-20 20:30:00",
end = "2018-09-22 03:30:00",
tz = "EST"))%>%
mutate(Event = 4)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval4)
ggplot(interval4) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 4\n") +
theme_bw()
interval5 <- all3 %>%
filter(Date >= as_datetime('2018-09-24 23:30:00') &
Date <= as_datetime('2018-09-26 23:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-24 23:30:00",
end = "2018-09-26 23:30:00",
tz = "EST"))%>%
mutate(Event = 5)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval5)
ggplot(interval5) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 5\n") +
theme_bw()
interval6 <- all3 %>%
filter(Date >= as_datetime('2018-09-30 15:30:00') &
Date <= as_datetime('2018-10-03 07:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-30 15:30:00",
end = "2018-10-03 07:30:00",
tz = "EST"))%>%
mutate(Event = 6)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval6)
ggplot(interval6) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 6\n") +
theme_bw()
interval7 <- all3 %>%
filter(Date >= as_datetime('2018-10-10 18:30:00') &
Date <= as_datetime('2018-10-11 14:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-10-10 18:30:00",
end = "2018-10-11 14:30:00",
tz = "EST"))%>%
mutate(Event = 7)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval7)
ggplot(interval7) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 7\n") +
theme_bw()
interval8 <- all3 %>%
filter(Date >= as_datetime('2018-10-31 20:30:00') &
Date <= as_datetime('2018-11-02 12:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-10-31 20:30:00",
end = "2018-11-02 12:30:00",
tz = "EST"))%>%
mutate(Event = 8)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval8)
ggplot(interval8) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 8\n") +
theme_bw()
interval9 <- all3 %>%
filter(Date >= as_datetime('2018-11-02 13:30:00') &
Date <= as_datetime('2018-11-03 20:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-11-02 13:30:00",
end = "2018-11-03 20:30:00",
tz = "EST"))%>%
mutate(Event = 9)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval_ppt, interval9)
ggplot(interval9) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 9\n") +
theme_bw()
interval_ppt <- bind_rows(interval_ppt, interval9)
ggplot(interval9) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 9\n") +
theme_bw()
View(interval_ppt)
ggplot(all4) +
geom_line(mapping=aes(x= dt, y= yield_mm, colour = site, group = site),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield \n") +
theme_bw() + facet_wrap(~site, scales = "free_y", ncol = 1)+#scales optional
theme(legend.position="none")
flow <- structure(interval2$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval2$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01")
tt <-as.POSIXct(sum(flow * attr(flow, 'index'))/sum(flow), origin = "1970-01-01")
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01") %>%
format(tt, tz="EST",usetz=TRUE)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01")
tm <-format(tt, tz="EST",usetz=TRUE)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01")
tm <-format(tt, tz="EST",usetz=TRUE)
View(tm)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01",format(tt, tz="EST",usetz=TRUE) )
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01", tz="EST",usetz=TRUE)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01", tz="GMT",usetz=TRUE)
flow1 <- structure(interval1$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
flow1 <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01", tz="GMT",usetz=TRUE)
tt <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt, flow), origin = "1970-01-01", tz="EST",usetz=TRUE)
flow1 <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt1 <- as.numeric(time(flow))
as.POSIXct(weighted.mean(tt1, flow1), origin = "1970-01-01", tz="EST",usetz=TRUE)
flow1 <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt1 <- as.numeric(time(flow1))
as.POSIXct(weighted.mean(tt1, flow1), origin = "1970-01-01", tz="EST",usetz=TRUE)
interval_ppt <- slice(all3, 0)
interval1 <- all3 %>%
filter(Date >= as_datetime('2018-07-25 23:30:00') &
Date <= as_datetime('2018-07-26 12:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-07-25 23:30:00",
end = "2018-07-25 23:30:00",
tz = "EST"))%>%
mutate(Event = 1)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
ggplot(interval1) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield \n") +
theme_bw()
interval_ppt <- slice(all3, 0)
interval1 <- all3 %>%
filter(Date >= as_datetime('2018-07-25 23:30:00') &
Date <= as_datetime('2018-07-26 12:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-07-25 23:30:00",
end = "2018-07-25 23:30:00",
tz = "EST"))%>%
mutate(Event = 1)%>%
select(interval, Date, Event, W9_Precipitation_mm )%>%
drop_na()
ggplot(interval1) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event :1 \n") +
theme_bw()
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
View(interval1)
flow1 <- structure(interval1$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt1 <- as.numeric(time(flow1))
as.POSIXct(weighted.mean(tt1, flow1), origin = "1970-01-01", tz="EST",usetz=TRUE)
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
flow2 <- structure(interval2$W9_Precipitation_mm, .Dim = c(14L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
flow2 <- structure(interval2$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt1 <- as.numeric(time(flow2))
as.POSIXct(weighted.mean(tt2, flow2), origin = "1970-01-01", tz="EST",usetz=TRUE)
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
flow2 <- structure(interval2$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval1$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt2 <- as.numeric(time(flow2))
as.POSIXct(weighted.mean(tt2, flow2), origin = "1970-01-01", tz="EST",usetz=TRUE)
interval2 <- all3 %>%
filter(Date >= as_datetime('2018-09-03 01:30:00') &
Date <= as_datetime('2018-09-04 10:30:00')) %>%
mutate(interval = lubridate::interval(start = "2018-09-03 01:30:00",
end = "2018-09-04 10:30:00",
tz = "EST"))%>%
mutate(Event = 2)%>%
select(interval,Date, Event, W9_Precipitation_mm )%>%
drop_na()
interval_ppt <- bind_rows(interval1, interval2)
ggplot(interval2) +
geom_line(mapping=aes(x= Date, y= W9_Precipitation_mm),
linewidth = 1) +
labs(x =  "\n Datetime", y= "Yield in mm \n", title = " Time vs. Yield - Event : 2 \n") +
theme_bw()
flow2 <- structure(interval2$W9_Precipitation_mm, .Dim = c(34L, 1L),
index = structure(interval2$Date, tzone = "EST",
tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"),
tclass = c("POSIXct", "POSIXt"), .indexTZ = "EST", tzone = "EST",
.Dimnames = list(NULL, structure("Flow", .Dim = c(1L, 1L))))
tt2 <- as.numeric(time(flow2))
as.POSIXct(weighted.mean(tt2, flow2), origin = "1970-01-01", tz="EST",usetz=TRUE)
