#here package
library(here)
here()
here <- here()
# I try to keep object names informative and short
# we often use "ppt" for precipitation
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
#Setup (I try to load all packages at the top)
library(readr)
library(here)
#here package example
# library(here)
here <- here() #create a filepath object named "here" to use later
# I try to keep object names informative and short
# we often use "ppt" for precipitation
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
View(ppt)
glimpse(ppt)
#Setup (I try to load all packages at the top)
library(tidyverse) #this is a set of several packages including 'readr'
#you can specify the package that the function belongs to (see below)
#this is a good idea to reminder yourself when you're first learning
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
glimpse(ppt)
#finding working directory
getwd()
#filter
library(lubridate)
is.interval(ppt$datetime_interval_EST
)
library(tidyverse) #this is a set of several packages including 'readr'
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
glimpse(ppt)
is.interval(ppt$datetime_interval_EST)
getwd()
View(ppt)
ppt1 <- read_csv(paste0(here, "/data/W9_Streamflow_Precipitation"))
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt1 <- read_csv(paste0(here, "/data/W9_Streamflow_Precipitation"))
ppt1 <- read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
ppt1 <- read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
ppt1 <- readr::read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
View(ppt1)
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
library(lubridate)
day <- today()
str(day)
day <- today(tz=IST)
day <- today(tz= "IST")
day <- today(tz= "India Standard Time")
day <- today(tz= "India/Kolkata")
day <- today(tz= "India/Delhi")
head(OlsonNames())
OlsonNames()
day <- today(tz= "Asia/Kolkata")
str(day)
datetime <- now(tz= "Asia/Kolkata")
str(datetime)
dateFormat1 <- "20220922"
ymd(dateFormat1)
ppt_new <- ppt %>%
select(datetime_interval_EST) %>%
rename(interval = datetime_interval_EST)
glimpse(ppt_new)
View(ppt_new)
View(ppt_new)
ppt <- ppt %>%
select(datetime_interval_EST) %>%
rename(interval = datetime_interval_EST)
glimpse(ppt)
View(ppt)
View(ppt)
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
is.interval(ppt$datetime_interval_EST)
is.interval(ppt$datetime_interval_EST)
is.interval(ppt$datetime_interval_EST)
as.interval(ppt$datetime_interval_EST)
library(tidyverse) #this is a set of several packages including 'readr'
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
sapply(data, class)
sapply(ppt, class)
is.interval(ppt$datetime_interval_EST) #this column is not classed as an 'interval'
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
is.interval(ppt$datetime_interval_EST)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt1 <- read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt1 <- readr::read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv"))
glimpse(ppt)
glimpse(ppt1)
is.interval(ppt$datetime_interval_EST)
library(tidyverse)
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
glimpse(ppt)
as.interval(ppt$datetime_interval_EST)
is.interval(ppt$datetime_interval_EST)
ppt$datetime_interval_EST <- as.numeric(ppt$datetime_interval_EST)
sappy(ppt, class)
sapply(ppt, class)
is.interval(ppt$datetime_interval_EST)
as.interval(ppt$datetime_interval_EST)
View(ppt)
library(tidyverse)
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
ppt <- readr::read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
sapply(ppt, class)
is.interval(ppt$datetime_interval_EST)
ppt$datetime_interval_EST <- as.interval(as.numeric(ppt$datetime_interval_EST))
as.interval(3600, ymd("2009-01-01"))
library(tidyverse)
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
glimpse(ppt)
is.interval(ppt$datetime_interval_EST)
library(tidyverse)
library(here)
here <- here()
ppt <- read_csv(paste0(here, "/data/W9_Throughfall_Stemflow_Precipitation.csv"))
glimpse(ppt)
is.interval(ppt$datetime_interval_EST)
as.interval(ppt$datetime_interval_EST)
ppt$datetime_interval_EST <- as.numeric(ppt$datetime_interval_EST)
ppt$datetime_interval_EST <- as.interval(ppt$datetime_interval_EST)
interval(start = 2018-05-31 16:30:00, end = 2018-06-04 14:20:00)
interval(start = "2018-05-31 16:30:00", end = "2018-06-04 14:20:00")
ppt <- ppt %>%
mutate(datetime_start_GMT = as.POSIXct(datetime_start_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_end_GMT = as.POSIXct(datetime_end_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_interval_GMT  = interval(datetime_start_GMT, datetime_end_GMT, tz="America/Cancun"),
event_dur_sec = dseconds(datetime_interval_GMT),
label_start = "start",
label_end = "end")
rlang::last_error()
ppt <- ppt %>%      mutate(datetime_start_GMT = as.POSIXct(datetime_start_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
+            datetime_end_GMT = as.POSIXct(datetime_end_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
+            datetime_interval_GMT  = interval(datetime_start_GMT, datetime_end_GMT, tz="America/Cancun"),
+            event_dur_sec = dseconds(datetime_interval_GMT),
+            label_start = "start",
+            label_end = "end")
Error in `mutate()`:
ppt <- ppt %>%     mutate(datetime_start_GMT = as.POSIXct(datetime_start_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_end_GMT = as.POSIXct(datetime_end_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_interval_GMT  = interval(datetime_start_GMT, datetime_end_GMT, tz="America/Cancun"),
event_dur_sec = dseconds(datetime_interval_GMT),
label_start = "start",
label_end = "end")
ppt <- ppt %>%
mutate(datetime_start_GMT = as.POSIXct(datetime_start_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_end_GMT = as.POSIXct(datetime_end_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun")
tz(ppt$datetime_end_GMT)
ppt <- ppt %>%
mutate(datetime_start_GMT = as_datetime(datetime_start_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
datetime_end_GMT = as_datetime(datetime_end_GMT, format = "%m/%d/%Y %H:%M", tz="America/Cancun")
tz(ppt$datetime_end_GMT)
tz(ppt$datetime_start_GMT)
ppt <- ppt %>%
#Created this csv file in excel from browsing the sample log to determine periods of time when precip was collected
W9_precip_events <- read_csv(paste0(here,"/Precip-TF-SF/data/W9_tree_events.csv"))
#define time intervals based on start and end variables
W9_precip_events <- W9_precip_events %>%
mutate(dt_start = as.POSIXct(dt_start, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
dt_end = as.POSIXct(dt_end, format = "%m/%d/%Y %H:%M", tz="America/Cancun"),
dt_interval = interval(dt_start, dt_end, tz="America/Cancun"),
event_dur_sec = dseconds(dt_interval),
label_start = "start",
label_end = "end")
tz(W9_precip_events$dt_end)
#load W9 basin precip record for CY2017-2018
W9_ppt_fin <- readRDS(paste0(here, "/Precip-TF-SF/results/W9_ppt_fin.Rds"))
ppt <- ppt %>%
ppt$datetime_interval_EST <- as.numeric(ppt$datetime_interval_EST)
ppt$datetime_interval_EST <- as.numeric(ppt$datetime_interval_EST)
sapply(ppt, class)
ppt <- ppt %>%
mutate(datetime_interval_EST <- as.interval(3600, ymd("2018-05-31")))
rlang::last_error()
?as.interval
as.interval(3600, ymd("2009-01-01"))
ppt$datetime_interval_EST <- as.interval(3600, ymd(2018-05-31))
ppt <- ppt %>%
ppt$datetime_interval_EST <- as.interval(3600, ymd("2018-05-31"))
ppt <- ppt %>%
mutate(ppt$datetime_interval_EST <- as.interval(3600, ymd("2018-05-31")))
ppt <- ppt %>%
mutate(datetime_interval_EST <- as.interval(3600, ymd("2018-05-31")))
