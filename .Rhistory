geom_point(mapping=aes(x=datetime_EST2, y= yield_mm,  color = limb))+
facet_wrap(~Event, scales = "free")+
labs(title="Precipitation (R3)",
x ="Datetime", y = "Yield mm")
hobo_events_limbs_r3<- readRDS(paste0(here, "/output/hobo_limbs.Rds"))%>%
filter(limb == "peak")%>%
rename("Event" = "hobo_event_n")%>%
rownames_to_column()%>%
mutate(to_keep = case_when (rowname %in% c(26,53,54,27, 28) ~ FALSE,
TRUE ~ TRUE))%>%
filter(to_keep) %>% select(-c( to_keep, rowname))
SF <- hobo_events_limbs_r3%>%
filter(!str_detect(site, "TF"))%>%
pivot_wider(names_from = "site", values_from = "roll_yield")%>%
pivot_longer(cols = c("SFA_mm","SFC_mm") , names_to = "Sugar",
values_to = "Sugar_Maple_mm")%>%
pivot_longer(cols = c("SFB_mm","SFD_mm") , names_to = "Yellow",
values_to = "Yellow_Birch_mm")%>%
pivot_longer(cols = c("Sugar_Maple_mm","Yellow_Birch_mm") , names_to = "Stemflow",
values_to = "Stemflow_yield")%>%
select(-Sugar, -Yellow)%>%
distinct(across(Stemflow_yield), .keep_all = TRUE)%>%
na.omit()
TF <- hobo_events_limbs_r3%>%
filter(str_detect(site, "TF"))%>%
pivot_wider(names_from = "site", values_from = "roll_yield")%>%
pivot_longer(cols = c("TFB_mm","TFD_mm") , names_to = "throughfall",
values_to = "throughfall_yield")%>%
#select(-TFB_mm, -Yellow)%>%
#distinct(across(throughfall_yield), .keep_all = TRUE)%>%
na.omit()
Flowpath <-hobo_events_limbs_r3%>%
pivot_wider(names_from = "site", values_from = "roll_yield")%>%
pivot_longer(cols = c("SFA_mm","SFC_mm") , names_to = "Sugar",
values_to = "Sugar_Maple_mm")%>%
pivot_longer(cols = c("SFB_mm","SFD_mm") , names_to = "Yellow",
values_to = "Yellow_Birch_mm")%>%
pivot_longer(cols = c("TFB_mm","TFD_mm") , names_to = "Throughfall",
values_to = "Throughfall_yield")%>%
select(dt, Sugar_Maple_mm, Yellow_Birch_mm, Throughfall_yield, Event, dt_max_yield_mm,dt)%>%
pivot_longer(cols = c("Sugar_Maple_mm", "Throughfall_yield", "Yellow_Birch_mm") , names_to = "site",
values_to = "path_yield_rate")%>%
distinct(across(path_yield_rate), .keep_all = TRUE)%>%
na.omit()
#Time lag calculation
time_lag_cal_Flowpath <-inner_join(Flowpath , centroid,
by = c("Event")) %>%
mutate(time_lag = lubridate::interval(start = meanX,
end = dt_max_yield_mm,
tz = "EST"),
time_lag_duration = dseconds(time_lag))%>%
#select(Event, dt_max_yield_mm,meanX,time_lag,time_lag_duration, yield_mm, max_yld_mm) %>%
rename("centroid_time" = "meanX")
View(time_lag_cal_Flowpath)
library(here)
here <- here()
here
library(tidyverse)
library(lubridate)
library(fs)
library(xts)
library(dygraphs)
library(readxl)
# library(ggplot2)
library(scales)
library(patchwork)
library(broom)
# ppt <- readr::read_csv(paste0(here, "/data/W9_Streamflow_Precipitation.csv")) %>%
#   mutate(.after = datetime_EST, #indicates where the new column is placed
#          datetime_EST2 = as.POSIXct(datetime_EST, format = "%m/%d/%Y %H:%M")) %>%
#   filter(minute(datetime_EST2) == 0) %>% #remove subhourly timestamps
#   select(-W9_Streamflow_mm_hr) %>%
#   arrange(datetime_EST2) #Order from earliest to latest timestamp
#
#
#
# ppt_interval <-readr::read_csv(paste0(here, "/data/ppt_interval_fomatted.csv"))
# tz(ppt_interval$Start_dt_EST)
# ppt_interval2 <- ppt_interval%>%
#   mutate(across(.cols = lubridate::is.POSIXct,
#                 ~ lubridate::force_tz(., tzone='EST'))) %>%
#   mutate(.after = End_dt_EST,
#          datetime_interval_EST = lubridate::interval(start = Start_dt_EST,
#                                                      end = End_dt_EST,
#                                                      tz = "EST"),
#          event_dur_sec = dseconds(datetime_interval_EST))
# all_events<-inner_join(ppt_daily_api_events, nested_hobo_events,
#                        by = c( "recession_n")) %>%
#   group_by(recession_n, dt_interval)%>%
#   mutate(event_dur_num = as.numeric(dt_interval),
#          units="secs") %>% ##24hrs event
#   mutate(event_intensity = W9_Precipitation_mm/event_dur_num) %>%
#   ungroup() %>%
#   group_by(event_n) %>%
#   mutate(cv = sd(m) / mean(m) * 100) %>%
#   ungroup()
#currently on
ppt_events <-readr::read_csv(paste0(here,  "/output/ppt_events.csv"))%>%
select(datetime_EST2, W9_Precipitation_mm, Event)%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::force_tz(., tzone='EST')))
tz(ppt_events$datetime_EST2)
rec_values <- read_csv(paste0(here, "/data/rec_values.csv"))%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
rename("rec_yield" = "yield_mm")
rec_intervals <- read_csv(paste0(here, "/data/curve_intervals.csv"))%>%
select(-notes)%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
drop_na()
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))
merged_rec <- full_join(rec_values, rec_intervals,
by = c( "recession_n", "site"))
centroid<-ppt_events %>%
group_by(Event) %>%
summarise(meanX=mean(datetime_EST2), meanY=mean(W9_Precipitation_mm))%>%
rename("event_n" = "Event", "centroid" = "meanX")
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = dt,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))%>%
select(recession_n, hobo_event_n, dt, site, datetime_interval_EST,
event_dur_sec, centroid, Delta_T, Delta_T_duration)
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = dt,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))
View(DeltaT)
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = Start_dt_EST,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))
View(DeltaT)
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = Start_dt_EST,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))%>%
distinct(recession_yield, .keep_all = TRUE)
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = Start_dt_EST,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))%>%
distinct(recession_n, .keep_all = TRUE)
View(DeltaT)
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = Start_dt_EST,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))%>%
distinct(recession_n, .keep_all = TRUE)%>%
select(recession_n, hobo_event_n, dt, site, datetime_interval_EST,
event_dur_sec, centroid, Delta_T, Delta_T_duration)
View(DeltaT)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)
View(Event_stats)
View(Event_stats)
View(Event_stats)
View(DeltaT)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)
select(hobo_event_n, recession_n, max_rec_yld, total_rec_yld,
rec_yld_intensity)
View(Event_stats)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)%>%
select(hobo_event_n, recession_n, max_rec_yld, total_rec_yld,
rec_yld_intensity)
View(Event_stats)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)%>%
select(hobo_event_n, recession_n, site, dt, max_rec_yld, total_rec_yld,
rec_yld_intensity)
cv <- Event_stats%>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)%>%
select(hobo_event_n, recession_n, site, dt, max_rec_yld, total_rec_yld,
rec_yld_intensity, event_dur_num)
cv <- Event_stats%>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
View(cv)
table2_r8 <- full_join(Event_stats, cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
View(table2_r8)
centroid<-ppt_events %>%
group_by(Event) %>%
summarise(meanX=mean(datetime_EST2), meanY=mean(W9_Precipitation_mm))%>%
rename("event_n" = "Event", "centroid" = "meanX")
DeltaT <- full_join(merged_rec , centroid,
by = c("event_n")) %>%
mutate(Delta_T = lubridate::interval(start = centroid,
end = Start_dt_EST,
tz = "EST"),
Delta_T_duration = dseconds(Delta_T))%>%
distinct(recession_n, .keep_all = TRUE)%>%
select(recession_n, hobo_event_n, dt, site, datetime_interval_EST,
event_dur_sec, centroid, Delta_T, Delta_T_duration)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
mutate(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)%>%
distinct(across(recession_n), .keep_all = TRUE)%>%
select(hobo_event_n, recession_n, site, dt, max_rec_yld, total_rec_yld,
rec_yld_intensity, event_dur_num, event_dur_sec)
cv <- Event_stats%>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
table2_r8 <- full_join(Event_stats, cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
View(table2_r8)
View(rec_model)
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))%>%
select(recession_n, hobo_event_n, dt, site, i, m)
View(rec_model)
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model,
by = c("hobo_event_n","recession_n","dt","site"))
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model,
by = c("hobo_event_n","recession_n","dt","site"))
View(rec_model)
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))
rec_model_coeff <- rec_model%>%
select(recession_n, hobo_event_n, dt, site, i, m)
View(rec_model_coeff)
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model_coeff,
by = c("hobo_event_n","recession_n","dt","site"))
table2_r8 <- full_join(Event_stats, rec_model_coeff,
by = c("hobo_event_n","recession_n","dt","site"))
View(table2_r8)
table2_r8 <- full_join(Event_stats, cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
fin_table2 <- inner_join(table2_r8, rec_model_coeff,
by= c("hobo_event_n","recession_n","dt","site"))
View(fin_table2)
View(rec_model)
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
select(recession_n, hobo_event_n, dt, site, i, m)
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model,
by = c("hobo_event_n","recession_n","dt","site"))
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model,
by = c("hobo_event_n","recession_n","dt","site"))
table2_r8 <- full_join(Event_stats, cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
fin_table2 <- inner_join(table2_r8, rec_model_coeff,
by= c("hobo_event_n","recession_n","dt","site"))
View(fin_table2)
View(rec_model)
fin_table2 <- inner_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt","site"))
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt","site"))
View(fin_table2)
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt"))
View(fin_table2)
View(rec_model)
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
mutate(site = recession_n)%>%
mutate(site = case_when(str_detect(site, "SFA") ~ "SF-A",
str_detect(site, "SFB") ~ "SF-B",
str_detect(site, "SFC") ~ "SF-C",
str_detect(site, "SFD") ~ "SF-D",
str_detect(site, "TFB") ~ "TF-B",
str_detect(site, "TFD") ~ "TF-D"))%>%
ungroup()%>%
select(recession_n, hobo_event_n, dt, site, i, m)
View(rec_model)
View(table2_r8)
table2_r8 <- full_join(Event_stats, cv, DeltaT, rec_model,
by = c("hobo_event_n","recession_n","dt","site"))
View(rec_model)
table2_r8 <- full_join(Event_stats, cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt"))
View(fin_table2)
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt", "site"))
View(fin_table2)
View(rec_model)
rec_model <- read_csv(paste0(here, "/data/rec_model.csv"))%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
mutate(site = recession_n)%>%
mutate(site = case_when(str_detect(site, "SFA") ~ "SF-A",
str_detect(site, "SFB") ~ "SF-B",
str_detect(site, "SFC") ~ "SF-C",
str_detect(site, "SFD") ~ "SF-D",
str_detect(site, "TFB") ~ "TF-B",
str_detect(site, "TFD") ~ "TF-D"))%>%
ungroup()%>%
select(recession_n, hobo_event_n, dt, site, i, m)
View(cv)
View(merged_rec)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
summarise(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield),
rec_yld_intensity = total_rec_yld/event_dur_num)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
summarise(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield))
View(Event_stats)
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
summarise(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield))%>%
ungroup()
Event_stats <- merged_rec%>%
group_by(recession_n)%>%
summarise(max_rec_yld = max(rec_yield),
total_rec_yld = sum(rec_yield))%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("hobo_event_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
View(rec_intervals)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(recession_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100,
cv_intensity = sd(rec_yld_intensity) / mean(rec_yld_intensity) * 100)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(recession_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)
View(cv)
rec_intervals <- read_csv(paste0(here, "/data/curve_intervals.csv"))%>%
select(-notes)%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
rename("event_n" = "Event")%>%
drop_na()
rec_intervals <- read_csv(paste0(here, "/data/curve_intervals.csv"))%>%
select(-notes)%>%
mutate(across(.cols = lubridate::is.POSIXct,
~ lubridate::with_tz(., tzone='EST')))%>%
rename("hobo_event_n" = "event_n")%>%
drop_na()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)
View(cv)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, dt, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, cv_dur, cv_max, cv_total, cv_intensity)%>%
ungroup()
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, cv_dur, cv_max, cv_total)%>%
ungroup()
View(cv)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, cv_dur, cv_max, cv_total, max_rec_yld,
total_rec_yld)%>%
ungroup()
View(cv)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, cv_dur, cv_max, cv_total, max_rec_yld,
total_rec_yld, event_dur_sec)%>%
ungroup()
View(cv)
table2_r8 <- full_join(cv, DeltaT,
by = c("hobo_event_n","recession_n","dt","site"))
table2_r8 <- full_join(cv, DeltaT,
by = c("hobo_event_n","recession_n","site"))
View(table2_r8)
cv <- full_join(rec_intervals , Event_stats,
by = c("recession_n")) %>%
group_by(hobo_event_n) %>%
mutate(cv_dur = sd(event_dur_num) / mean(event_dur_num) * 100,
cv_max = sd(max_rec_yld) / mean(max_rec_yld) * 100,
cv_total = sd(total_rec_yld) / mean(total_rec_yld) * 100)%>%
select(recession_n, hobo_event_n, site, cv_dur, cv_max, cv_total, max_rec_yld,
total_rec_yld)%>%
ungroup()
table2_r8 <- full_join(cv, DeltaT,
by = c("hobo_event_n","recession_n","site"))
View(table2_r8)
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n","dt", "site"))
View(fin_table2)
fin_table2 <- full_join(table2_r8, rec_model,
by= c("hobo_event_n","recession_n", "site"))
View(fin_table2)
View(rec_model)
